<mat-card appearance="outlined" class="transaction-card" *ngIf="selectedUser; else noUserSelected">
    <mat-card-header>
        <div mat-card-avatar class="recipient-avatar">
            <img [src]="selectedUser.picture" alt="{{selectedUser.name}}">
        </div>
        <mat-card-title>Enviar a {{selectedUser.name}}</mat-card-title>
        <mat-card-subtitle>{{selectedUser.email}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="transaction-form">
            <mat-form-field appearance="outline" class="amount-field">
                <mat-label>Monto a enviar</mat-label>
                <input matInput type="number" formControlName="amount" placeholder="0.00" min="0">
                <span matTextPrefix class="currency-prefix">$</span>
                <mat-error *ngIf="transactionForm.get('amount')?.hasError('required')">
                    El monto es requerido
                </mat-error>
                <mat-error *ngIf="transactionForm.get('amount')?.hasError('min')">
                    El monto debe ser mayor a 0
                </mat-error>
            </mat-form-field>

            <div class="actions">
                <button mat-flat-button color="primary" type="submit"
                    [disabled]="transactionForm.invalid || !selectedUser" class="submit-btn">
                    <mat-icon>send</mat-icon>
                    Transferir Fondos
                </button>
            </div>
        </form>
    </mat-card-content>
</mat-card>

<ng-template #noUserSelected>
    <mat-card appearance="outlined" class="empty-state-card">
        <mat-card-content class="empty-state-content">
            <div class="icon-circle">
                <mat-icon>person_search</mat-icon>
            </div>
            <h3>Ning√∫n Destinatario Seleccionado</h3>
            <p>Seleccione un usuario de la lista para comenzar una transferencia.</p>
        </mat-card-content>
    </mat-card>
</ng-template>